---
title: Vorbereiten der Bereitstellung von Benutzern über die Verzeichnissynchronisierung in Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
ms.audience: Admin
ms.topic: article
f1_keywords:
- O365p_AddUsersWithDirSync
- O365M_AddUsersWithDirSync
- O365E_HRCSetupAADConnectAboutLM617031
- O365E_AddUsersWithDirSync
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOP150
- MOE150
- MBS150
ms.assetid: 01920974-9e6f-4331-a370-13aea4e82b3e
description: Vorbereiten der Bereitstellung von Benutzern zu Office 365 mithilfe von verzeichnissynchronisierung und der langfristigen Vorteile dieser Methode beschrieben.
ms.openlocfilehash: 78636fd3ec7aaaac8fa06ba8a0f2c37d76d1b045
ms.sourcegitcommit: 69d60723e611f3c973a6d6779722aa9da77f647f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/27/2018
ms.locfileid: "22540986"
---
# <a name="prepare-to-provision-users-through-directory-synchronization-to-office-365"></a><span data-ttu-id="627e2-103">Vorbereiten der Bereitstellung von Benutzern über die Verzeichnissynchronisierung in Office 365</span><span class="sxs-lookup"><span data-stu-id="627e2-103">Prepare to provision users through directory synchronization to Office 365</span></span>

<span data-ttu-id="627e2-p101">Einrichten von Benutzern mithilfe von verzeichnissynchronisierung erfordert weitere Planung und Vorbereitung als einfach verwalten Ihres Kontos arbeiten oder Schule direkt in Office 365. Zusätzlichen Planung und Vorbereitung Aufgaben sind erforderlich, um sicherzustellen, dass Ihre lokalen Active Directory ordnungsgemäß zu Azure Active Directory synchronisiert. Die hinzugefügten organisationsinterne bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="627e2-p101">Provisioning users with directory synchronization requires more planning and preparation than simply managing your work or school account directly in Office 365. The additional planning and preparation tasks are required to ensure that your on-premises Active Directory synchronizes properly to Azure Active Directory. The added benefits to your organization include:</span></span>
  
- <span data-ttu-id="627e2-107">Verringern der Anzahl der Verwaltungsprogramme in Ihrer Organisation</span><span class="sxs-lookup"><span data-stu-id="627e2-107">Reducing the administrative programs in your organization</span></span>
- <span data-ttu-id="627e2-108">Aktivieren optional Szenario für einmaliges Anmelden</span><span class="sxs-lookup"><span data-stu-id="627e2-108">Optionally enabling single sign-on scenario</span></span>
- <span data-ttu-id="627e2-109">Automatisieren von Kontoänderungen in Office 365</span><span class="sxs-lookup"><span data-stu-id="627e2-109">Automating account changes in Office 365</span></span>
    
<span data-ttu-id="627e2-110">Weitere Informationen zu den Vorteilen der Verwendung von verzeichnissynchronisierung finden Sie unter [Directory Synchronization Roadmap]( https://go.microsoft.com/fwlink/p/?LinkId=525398) und [Grundlegendes zu Office 365-Identität und Azure Active Directory](about-office-365-identity.md).</span><span class="sxs-lookup"><span data-stu-id="627e2-110">For more information about the advantages of using directory synchronization, see [Directory synchronization roadmap]( https://go.microsoft.com/fwlink/p/?LinkId=525398) and [Understanding Office 365 Identity and Azure Active Directory](about-office-365-identity.md).</span></span>
  
<span data-ttu-id="627e2-111">Um zu bestimmen, welches Szenario der für Ihre Organisation am besten geeignet ist, überprüfen Sie den [Directory Integration Tools Comparison](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span><span class="sxs-lookup"><span data-stu-id="627e2-111">To determine which scenario is the best for your organization, review the [directory integration tools comparison](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span></span>
  
## <a name="directory-cleanup-tasks"></a><span data-ttu-id="627e2-112">Verzeichnis Bereinigungsaufgaben</span><span class="sxs-lookup"><span data-stu-id="627e2-112">Directory cleanup tasks</span></span>

<span data-ttu-id="627e2-113">Bevor Sie die Synchronisierung Ihres Verzeichnisses beginnen, müssen Sie Ihr Verzeichnis bereinigen.</span><span class="sxs-lookup"><span data-stu-id="627e2-113">Before you begin synchronizing your directory, you need to clean up your directory.</span></span>
  
<span data-ttu-id="627e2-114">Überprüfen Sie die [Attribute mit Azure Active Directory von Azure Active Directory verbinden synchronisiert](https://go.microsoft.com/fwlink/p/?LinkId=746480)auch.</span><span class="sxs-lookup"><span data-stu-id="627e2-114">Review also the [attributes synchronized to Azure Active Directory by Azure AD Connect](https://go.microsoft.com/fwlink/p/?LinkId=746480).</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="627e2-p102">Wenn Sie vor der Synchronisierung verzeichnisbereinigung nicht ausführen, kann sich erheblich auf den Bereitstellungsprozess negativ sein. Es kann Tage dauern oder sogar Wochen, den Lebenszyklus von verzeichnissynchronisierung, Identifizieren von Fehlern und erneute Synchronisierung durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="627e2-p102">If you don't perform directory cleanup before you synchronize, there can be a significant negative effect on the deployment process. It might take days, or even weeks, to go through the cycle of directory synchronization, identifying errors, and re-synchronization.</span></span> 
  
<span data-ttu-id="627e2-117">Führen Sie die folgenden Bereinigungsschritte in Ihrem lokalen Verzeichnis:</span><span class="sxs-lookup"><span data-stu-id="627e2-117">In your on-premises directory, complete the following clean-up tasks:</span></span>
  
1. <span data-ttu-id="627e2-118">Stellen Sie sicher, dass jeder Benutzer, der die Office 365-Dienstangebote nutzen darf, eine gültige und eindeutige E-Mail-Adresse im **proxyAddresses**-Attribut besitzt.</span><span class="sxs-lookup"><span data-stu-id="627e2-118">Ensure that each user who will be assigned Office 365 service offerings has a valid and unique email address in the **proxyAddresses** attribute.</span></span> 
    
2. <span data-ttu-id="627e2-119">Entfernen Sie alle doppelten Werte im **ProxyAddresses**-Attribut.</span><span class="sxs-lookup"><span data-stu-id="627e2-119">Remove any duplicate values in the **proxyAddresses** attribute.</span></span> 
    
3.  <span data-ttu-id="627e2-p103">Wenn möglich, stellen Sie sicher, dass jeder Benutzer, die Office 365-Dienstangebote zugewiesen wird einen gültigen und eindeutigen Wert für das **UserPrincipalName** -Attribut im **Benutzerobjekt des Benutzers** vorhanden ist. Bewährte Synchronisierung wünschen stellen Sie sicher, dass die lokale Active Directory-UPN die Cloud UPN übereinstimmt. Wenn ein Benutzer einen Wert für das **UserPrincipalName** -Attribut nicht verfügt, muss **das Benutzerobjekt** einen gültigen und eindeutigen Wert für das **sAMAccountName** -Attribut enthalten. Entfernen Sie keine doppelten Werte im Attribut **UserPrincipalName** .</span><span class="sxs-lookup"><span data-stu-id="627e2-p103">If possible, ensure that each user who will be assigned Office 365 service offerings has a valid and unique value for the **userPrincipalName** attribute in the user's **user** object. For best synchronization experience, ensure that the on-premises Active Directory UPN matches the cloud UPN. If a user does not have a value for the **userPrincipalName** attribute, then the **user** object must contain a valid and unique value for the **sAMAccountName** attribute. Remove any duplicate values in the **userPrincipalName** attribute.</span></span> 
    
4. <span data-ttu-id="627e2-124">Überprüfen Sie die Richtigkeit der folgenden Attribute, um die globale Adressliste (GAL) sinnvoll einsetzen zu können:</span><span class="sxs-lookup"><span data-stu-id="627e2-124">For optimal use of the global address list (GAL), be sure the information in the following attributes is correct:</span></span>
    
  - <span data-ttu-id="627e2-125">givenName </span><span class="sxs-lookup"><span data-stu-id="627e2-125">givenName</span></span>
  - <span data-ttu-id="627e2-126">surname</span><span class="sxs-lookup"><span data-stu-id="627e2-126">surname</span></span>
  - <span data-ttu-id="627e2-127">displayName</span><span class="sxs-lookup"><span data-stu-id="627e2-127">displayName</span></span>
  - <span data-ttu-id="627e2-128">Position</span><span class="sxs-lookup"><span data-stu-id="627e2-128">Job Title</span></span>
  - <span data-ttu-id="627e2-129">Abteilung</span><span class="sxs-lookup"><span data-stu-id="627e2-129">Department</span></span>
  - <span data-ttu-id="627e2-130">Büro</span><span class="sxs-lookup"><span data-stu-id="627e2-130">Office</span></span>
  - <span data-ttu-id="627e2-131">Telefon (geschäftlich)</span><span class="sxs-lookup"><span data-stu-id="627e2-131">Office Phone</span></span>
  - <span data-ttu-id="627e2-132">Mobiltelefon</span><span class="sxs-lookup"><span data-stu-id="627e2-132">Mobile Phone</span></span>
  - <span data-ttu-id="627e2-133">Faxnummer</span><span class="sxs-lookup"><span data-stu-id="627e2-133">Fax Number</span></span>
  - <span data-ttu-id="627e2-134">Straße</span><span class="sxs-lookup"><span data-stu-id="627e2-134">Street Address</span></span>
  - <span data-ttu-id="627e2-135">Stadt</span><span class="sxs-lookup"><span data-stu-id="627e2-135">City</span></span>
  - <span data-ttu-id="627e2-136">Bundesland oder Kanton</span><span class="sxs-lookup"><span data-stu-id="627e2-136">State or Province</span></span>
  - <span data-ttu-id="627e2-137">Postleitzahl</span><span class="sxs-lookup"><span data-stu-id="627e2-137">Zip or Postal Code</span></span>
  - <span data-ttu-id="627e2-138">Land oder Region</span><span class="sxs-lookup"><span data-stu-id="627e2-138">Country or Region</span></span>
    
## <a name="directory-object-and-attribute-preparation"></a><span data-ttu-id="627e2-139">Verzeichnisobjekt- und Attributsvorbereitung</span><span class="sxs-lookup"><span data-stu-id="627e2-139">Directory object and attribute preparation</span></span>

<span data-ttu-id="627e2-p104">Erfolgreiche verzeichnissynchronisierung zwischen Ihrer lokalen Verzeichnis und Office 365 erfordert, dass Ihre lokalen Verzeichnisattributen ordnungsgemäß vorbereitet sind. Beispielsweise müssen Sie sicherstellen, dass bestimmte Zeichen nicht in bestimmte Attribute verwendet werden, die mit Office 365-Umgebung synchronisiert werden. Unerwartete Zeichen bewirken keine Synchronisierung fehlschlägt, aber möglicherweise eine Warnung zurück. Ungültige Zeichen verursacht Directory-Synchronisierung ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="627e2-p104">Successful directory synchronization between your on-premises directory and Office 365 requires that your on-premises directory attributes are properly prepared. For example, you need to ensure that specific characters aren't used in certain attributes that are synchronized with the Office 365 environment. Unexpected characters do not cause directory synchronization to fail but might return a warning. Invalid characters will cause directory synchronization to fail.</span></span>
  
<span data-ttu-id="627e2-p105">Directory-Synchronisierung schlägt ebenfalls fehl, wenn einige Ihrer Active Directory-Benutzer ein oder mehrere doppelter Attribute verfügen. Jeder Benutzer muss eindeutige Attribute verfügen.</span><span class="sxs-lookup"><span data-stu-id="627e2-p105">Directory synchronization will also fail if some of your Active Directory users have one or more duplicate attributes. Each user must have unique attributes.</span></span>
  
<span data-ttu-id="627e2-146">Die Attribute, die Sie vorbereiten müssen sind hier aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="627e2-146">The attributes that you need to prepare are listed here:</span></span>
  
 <span data-ttu-id="627e2-147">**Hinweis:** Das [IdFix-Tool](install-and-run-idfix.md) können auch diesen Prozess viel leichter machen.</span><span class="sxs-lookup"><span data-stu-id="627e2-147">**NOTE:** You can also use the [IdFix tool](install-and-run-idfix.md) to make this process a lot easier.</span></span> 
  
- <span data-ttu-id="627e2-148">**displayName**</span><span class="sxs-lookup"><span data-stu-id="627e2-148">**displayName**</span></span>
    
  - <span data-ttu-id="627e2-149">Wenn das Attribut im Benutzerobjekt vorhanden ist, wird es mit Office 365 synchronisiert.</span><span class="sxs-lookup"><span data-stu-id="627e2-149">If the attribute exists in the user object, it will be synchronized with Office 365.</span></span>
  - <span data-ttu-id="627e2-p106">Wenn dieses Attribut im Benutzerobjekt vorhanden ist, muss ein Wert dafür vorhanden sein. Das bedeutet, dass das Attribut nicht leer sein darf.</span><span class="sxs-lookup"><span data-stu-id="627e2-p106">If this attribute exists in the user object, there must be a value for it. That is, the attribute must not be blank.</span></span>
  - <span data-ttu-id="627e2-152">Maximale Anzahl der Zeichen: 256</span><span class="sxs-lookup"><span data-stu-id="627e2-152">Maximum number of characters: 256</span></span>
    
- <span data-ttu-id="627e2-153">**givenName **</span><span class="sxs-lookup"><span data-stu-id="627e2-153">**givenName**</span></span>
    
  - <span data-ttu-id="627e2-154">Wenn das Attribut im Benutzerobjekt vorhanden ist, wird es mit Office 365 synchronisiert. Es wird von Office 365 aber benötigt oder verwendet.</span><span class="sxs-lookup"><span data-stu-id="627e2-154">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
  - <span data-ttu-id="627e2-155">Maximale Anzahl der Zeichen: 64</span><span class="sxs-lookup"><span data-stu-id="627e2-155">Maximum number of characters: 64</span></span>
    
- <span data-ttu-id="627e2-156">**e-Mail-Nachrichten**</span><span class="sxs-lookup"><span data-stu-id="627e2-156">**mail**</span></span>
    
  - <span data-ttu-id="627e2-157">Der Attributwert muss innerhalb des Verzeichnisses eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-157">The attribute value must be unique within the directory.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="627e2-p107">Wenn doppelte Werte vorhanden sind, wird mit dem Wert der erste Benutzer synchronisiert. Nachfolgende Benutzer werden in Office 365 nicht angezeigt. Sie müssen entweder den Wert in Office 365 ändern oder Ändern einer der Werte in das lokale Verzeichnis damit beide Benutzer in Office 365 angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="627e2-p107">If there are duplicate values, the first user with the value is synchronized. Subsequent users will not appear in Office 365. You must modify either the value in Office 365, or modify both of the values in the on-premises directory in order for both users to appear in Office 365.</span></span> 
  
- <span data-ttu-id="627e2-161">**mailNickname** (Exchange-Alias)</span><span class="sxs-lookup"><span data-stu-id="627e2-161">**mailNickname** (Exchange alias)</span></span> 
    
  - <span data-ttu-id="627e2-162">Der Attributwert darf nicht mit einem Punkt (.) beginnen.</span><span class="sxs-lookup"><span data-stu-id="627e2-162">The attribute value cannot begin with a period (.).</span></span>
  - <span data-ttu-id="627e2-163">Der Attributwert muss innerhalb des Verzeichnisses eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-163">The attribute value must be unique within the directory.</span></span>
    
- <span data-ttu-id="627e2-164">**proxyAddresses **</span><span class="sxs-lookup"><span data-stu-id="627e2-164">**proxyAddresses**</span></span>
    
  - <span data-ttu-id="627e2-165">Attribut mit mehreren Werten</span><span class="sxs-lookup"><span data-stu-id="627e2-165">Multiple-value attribute</span></span>
  - <span data-ttu-id="627e2-166">Maximale Anzahl von Zeichen pro Wert: 256</span><span class="sxs-lookup"><span data-stu-id="627e2-166">Maximum number of characters per value: 256</span></span>
  - <span data-ttu-id="627e2-167">Der Attributwert darf keine Leerzeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="627e2-167">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="627e2-168">Der Attributwert muss innerhalb des Verzeichnisses eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-168">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="627e2-169">Ungültige Zeichen: \< \> (;) , [ ] "</span><span class="sxs-lookup"><span data-stu-id="627e2-169">Invalid characters: \< \> ( ) ; , [ ] "</span></span>
    
    <span data-ttu-id="627e2-170">Beachten Sie, dass die ungültigen Zeichen für Zeichen als Trennzeichen Typ hinter gelten und ":", sodass SMTP:User@contso.com ist zulässig, SMTP:user:M@contoso.com ist jedoch nicht.</span><span class="sxs-lookup"><span data-stu-id="627e2-170">Note that the invalid characters apply to the characters following the type delimiter and ":", such that SMTP:User@contso.com is allowed, but SMTP:user:M@contoso.com is not.</span></span>
    
    > [!IMPORTANT]
    > <span data-ttu-id="627e2-p108">Alle Simple Mail Transport Protocol (SMTP)-Adressen sollten e-Mail-messaging-Standards entsprechen. Wenn doppelte oder unerwünschte Adressen vorhanden sind, finden Sie unter dem Hilfethema [Entfernen doppelter und unerwünschte Proxy Adressen in Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span><span class="sxs-lookup"><span data-stu-id="627e2-p108">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards. If duplicate or unwanted addresses exist, see the Help topic [Removing duplicate and unwanted proxy addresses in Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span></span> 
  
- <span data-ttu-id="627e2-173">**sAMAccountName**</span><span class="sxs-lookup"><span data-stu-id="627e2-173">**sAMAccountName**</span></span>
    
  - <span data-ttu-id="627e2-174">Maximale Anzahl von Zeichen: 20</span><span class="sxs-lookup"><span data-stu-id="627e2-174">Maximum number of characters: 20</span></span>
  - <span data-ttu-id="627e2-175">Der Attributwert muss innerhalb des Verzeichnisses eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-175">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="627e2-p109">Ungültige Zeichen: [\ "|, /: \< \> + =;? \* ]</span><span class="sxs-lookup"><span data-stu-id="627e2-p109">Invalid characters: [ \ " | , / : \< \> + = ; ? \* ]</span></span>
  - <span data-ttu-id="627e2-178">Wenn ein Benutzer ein ungültiges Attribut **sAMAccountName**, aber ein gültiges Attribut **userPrincipalName** hat, wird das Benutzerkonto in Office 365 erstellt.</span><span class="sxs-lookup"><span data-stu-id="627e2-178">If a user has an invalid **sAMAccountName** attribute but has a valid **userPrincipalName** attribute, the user account is created in Office 365.</span></span> 
  - <span data-ttu-id="627e2-179">Wenn beide **Attribute, sAMAccountName** und **UserPrincipalName** , ungültig sind, muss das lokalen Active Directory-Attribut **UserPrincipalName** aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="627e2-179">If both **sAMAccountName** and **userPrincipalName** are invalid, the on-premises Active Directory **userPrincipalName** attribute must be updated.</span></span> 
    
- <span data-ttu-id="627e2-180">**sn** (Nachname)</span><span class="sxs-lookup"><span data-stu-id="627e2-180">**sn** (surname)</span></span> 
    
  - <span data-ttu-id="627e2-181">Wenn das Attribut im Benutzerobjekt vorhanden ist, wird es mit Office 365 synchronisiert. Es wird von Office 365 aber benötigt oder verwendet.</span><span class="sxs-lookup"><span data-stu-id="627e2-181">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
    
- <span data-ttu-id="627e2-182">**targetAddress**</span><span class="sxs-lookup"><span data-stu-id="627e2-182">**targetAddress**</span></span>
    
    <span data-ttu-id="627e2-p110">Es ist erforderlich, dass das **TargetAddress** -Attribut (beispielsweise SMTP:tom@contoso.com), das für den Benutzer aufgefüllt wird in der Office 365 GAL vorhanden sein muss. Dies würde in Drittanbieter-messaging Migrationsszenarien die Office 365-Schema-Erweiterung für das lokale Verzeichnis erfordern. Die Erweiterung der Office 365-Schema würde auch zum Verwalten von Office 365-Objekten, die mithilfe einer verzeichnissynchronisierungstool aus lokalen Verzeichnis aufgefüllt werden andere nützliche Attribute hinzufügen. Beispielsweise würde das **MsExchHideFromAddressLists** -Attribut für die Verwaltung ausgeblendete Postfächer oder Verteilergruppen hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="627e2-p110">It's required that the **targetAddress** attribute (for example, SMTP:tom@contoso.com) that's populated for the user must appear in the Office 365 GAL. In third-party messaging migration scenarios, this would require the Office 365 schema extension for the on-premises directory. The Office 365 schema extension would also add other useful attributes to manage Office 365 objects that are populated by using a directory synchronization tool from on-premises directory. For example, the **msExchHideFromAddressLists** attribute to manage hidden mailboxes or distribution groups would be added.</span></span> 
   
  - <span data-ttu-id="627e2-187">Maximale Anzahl der Zeichen: 256</span><span class="sxs-lookup"><span data-stu-id="627e2-187">Maximum number of characters: 256</span></span>
  - <span data-ttu-id="627e2-188">Der Attributwert darf keine Leerzeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="627e2-188">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="627e2-189">Der Attributwert muss innerhalb des Verzeichnisses eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-189">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="627e2-190">Ungültige Zeichen: \ \< \> (;) , [ ] "</span><span class="sxs-lookup"><span data-stu-id="627e2-190">Invalid characters: \ \< \> ( ) ; , [ ] "</span></span>
  - <span data-ttu-id="627e2-191">Alle SMTP-Adressen (Simple Mail Transport Protocol) müssen mit E-Mail-Messaging-Standards kompatibel sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-191">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
    
- <span data-ttu-id="627e2-192">**userPrincipalName**</span><span class="sxs-lookup"><span data-stu-id="627e2-192">**userPrincipalName**</span></span>
    
  - <span data-ttu-id="627e2-p111">Das **UserPrincipalName** -Attribut muss im Internet-Anmeldung Format, in dem der Benutzername gefolgt wird, das @-Zeichen (@) und einem Domänennamen: beispielsweise user@contoso.com. Alle Simple Mail Transport Protocol (SMTP)-Adressen sollten e-Mail-messaging-Standards entsprechen.</span><span class="sxs-lookup"><span data-stu-id="627e2-p111">The **userPrincipalName** attribute must be in the Internet-style sign-in format where the user name is followed by the at sign (@) and a domain name: for example, user@contoso.com. All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
  - <span data-ttu-id="627e2-p112">Die maximale Anzahl von Zeichen für das **userPrincipalName**-Attribut beträgt 113. Vor und nach dem at-Zeichen (@) ist eine bestimmte Anzahl von Zeichen zulässig:</span><span class="sxs-lookup"><span data-stu-id="627e2-p112">The maximum number of characters for the **userPrincipalName** attribute is 113. A specific number of characters are permitted before and after the at sign (@), as follows:</span></span> 
  - <span data-ttu-id="627e2-197">Maximale Anzahl von Zeichen für den Benutzerdomänennamen vor dem @-Zeichen: 64</span><span class="sxs-lookup"><span data-stu-id="627e2-197">Maximum number of characters for the user name that is in front of the at sign (@): 64</span></span>
  - <span data-ttu-id="627e2-198">Maximale Anzahl der Zeichen für den Domänennamen hinter dem @-Zeichen: 48</span><span class="sxs-lookup"><span data-stu-id="627e2-198">Maximum number of characters for the domain name following the at sign (@): 48</span></span>
  - <span data-ttu-id="627e2-p113">Ungültige Zeichen: \ % &amp; \* + / =? { } | \< \> ( ) ; : , [ ] "</span><span class="sxs-lookup"><span data-stu-id="627e2-p113">Invalid characters: \ % &amp; \* + / = ? { } | \< \> ( ) ; : , [ ] "</span></span>
  - <span data-ttu-id="627e2-201">Ä ist auch ein ungültiges Zeichen.</span><span class="sxs-lookup"><span data-stu-id="627e2-201">An umlaut is also an invalid character.</span></span>
  - <span data-ttu-id="627e2-202">Das @-Zeichen ist in jedem **UserPrincipalName** -Wert erforderlich.</span><span class="sxs-lookup"><span data-stu-id="627e2-202">The @ character is required in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="627e2-203">Das @-Zeichen darf nie das erste Zeichen in einem **userPrincipalName**-Wert sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-203">The @ character cannot be the first character in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="627e2-204">Der Benutzername darf nicht mit einem Punkt (.), einem kaufmännischen und-Zeichen enden (&amp;), ein Leerzeichen oder ein at-Zeichen (@).</span><span class="sxs-lookup"><span data-stu-id="627e2-204">The user name cannot end with a period (.), an ampersand (&amp;), a space, or an at sign (@).</span></span>
  - <span data-ttu-id="627e2-205">Der Benutzername darf keine Leerzeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="627e2-205">The user name cannot contain any spaces.</span></span>
  - <span data-ttu-id="627e2-206">Es müssen routingfähige Domänen verwendet werden. Beispielsweise können local oder interne Domänen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="627e2-206">Routable domains must be used; for example, local or internal domains cannot be used.</span></span>
  - <span data-ttu-id="627e2-207">Unicode-Zeichen werden in Unterstriche umgewandelt.</span><span class="sxs-lookup"><span data-stu-id="627e2-207">Unicode is converted to underscore characters.</span></span>
  - <span data-ttu-id="627e2-208">**userPrincipalName** darf keine doppelten Werte im Verzeichnis enthalten.</span><span class="sxs-lookup"><span data-stu-id="627e2-208">**userPrincipalName** cannot contain any duplicate values in the directory.</span></span> 
    
## <a name="prepare-the-userprincipalname-attribute"></a><span data-ttu-id="627e2-209">Vorbereiten des Attributs userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="627e2-209">Prepare the userPrincipalName attribute</span></span>

<span data-ttu-id="627e2-p114">Active Directory ist darauf ausgelegt, um die Endbenutzer in Ihrer Organisation zur Anmeldung bei Ihrem Verzeichnis mithilfe von **sAMAccountName** oder **UserPrincipalName**zu ermöglichen. Endbenutzer können auf ähnliche Weise, melden Sie sich bei Office 365 mithilfe der Benutzerprinzipalname (UPN) ihrer Arbeit oder Schule Konto. Directory-Synchronisierung versucht, erstellen neue Benutzer in Azure Active Directory mit dem gleichen UPN, die in Ihrem lokalen Verzeichnis ist. Der Benutzerprinzipalname ist wie eine e-Mail-Adresse formatiert.</span><span class="sxs-lookup"><span data-stu-id="627e2-p114">Active Directory is designed to allow the end users in your organization to sign in to your directory by using either **sAMAccountName** or **userPrincipalName**. Similarly, end users can sign in to Office 365 by using the user principal name (UPN) of their work or school account. Directory synchronization attempts to create new users in Azure Active Directory by using the same UPN that's in your on-premises directory. The UPN is formatted like an email address.</span></span> 

<span data-ttu-id="627e2-p115">In Office 365 wird der UPN das Standardattribut, das verwendet wird, um die e-Mail-Adresse zu generieren. Es ist einfach, **UserPrincipalName** abrufen (: lokal und in Azure Active Directory) und die primäre e-Mail-Adresse im **ProxyAddresses** auf unterschiedliche Werte festgelegt. Wenn sie auf unterschiedliche Werte festgelegt sind, können Verwirrung für Administratoren und Endbenutzer vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="627e2-p115">In Office 365, the UPN is the default attribute that's used to generate the email address. It's easy to get **userPrincipalName** (on-premises and in Azure Active Directory) and the primary email address in **proxyAddresses** set to different values. When they are set to different values, there can be confusion for administrators and end users.</span></span> 
  
<span data-ttu-id="627e2-p116">Es wird empfohlen, diese Attribute, um Verwechslungen zu vermeiden ausrichten. Die Anforderungen für einmaliges Anmelden mit Active Directory-Verbunddienste (AD FS) erfüllen 2.0, müssen Sie sicherstellen, dass die UPNs in Azure Active Directory und die lokale Active Directory übereinstimmen und einen gültigen Domänennamespace verwenden.</span><span class="sxs-lookup"><span data-stu-id="627e2-p116">It's best to align these attributes to reduce confusion. To meet the requirements of single sign-on with Active Directory Federation Services (AD FS) 2.0, you need to ensure that the UPNs in Azure Active Directory and your on-premises Active Directory match and are using a valid domain namespace.</span></span>
  
## <a name="add-an-alternative-upn-suffix-to-ad-ds"></a><span data-ttu-id="627e2-219">Hinzufügen eines alternativen UPN-Suffixes zu AD DS</span><span class="sxs-lookup"><span data-stu-id="627e2-219">Add an alternative UPN suffix to AD DS</span></span>

<span data-ttu-id="627e2-p117">Sie müssen möglicherweise ein alternatives UPN-Suffix zum Zuordnen der Anmeldeinformationen des Benutzers im Unternehmen mit Office 365-Umgebung hinzufügen. Ein UPN-Suffix ist der Teil des UPN rechts neben dem @-Zeichen. UPNs, die für einmaliges Anmelden verwendet werden können Buchstaben, Zahlen, Punkte, Bindestriche und Unterstriche jedoch keine anderen Arten von Zeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="627e2-p117">You may need to add an alternative UPN suffix to associate the user's corporate credentials with the Office 365 environment. A UPN suffix is the part of a UPN to the right of the @ character. UPNs that are used for single sign-on can contain letters, numbers, periods, dashes, and underscores, but no other types of characters.</span></span>
  
<span data-ttu-id="627e2-223">Weitere Informationen zum Hinzufügen eines alternativen UPN-Suffixes zu Active Directory finden Sie unter [Vorbereiten der verzeichnissynchronisierung]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span><span class="sxs-lookup"><span data-stu-id="627e2-223">For more information on how to add an alternative UPN suffix to Active Directory, see [Prepare for directory synchronization]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span></span>
  
## <a name="match-the-on-premises-upn-with-the-office-365-upn"></a><span data-ttu-id="627e2-224">Abgleichen der lokalen UPNS mit dem Office 365 UPN</span><span class="sxs-lookup"><span data-stu-id="627e2-224">Match the on-premises UPN with the Office 365 UPN</span></span>

<span data-ttu-id="627e2-p118">Wenn Sie bereits verzeichnissynchronisierung eingerichtet haben, kann des Benutzers UPN für Office 365 nicht die lokalen UPN des Benutzers übereinstimmen, die in Ihren lokalen Verzeichnisdienst definiert ist. Dies kann vorkommen, wenn ein Benutzer eine Lizenz zugewiesen wurde, bevor die Domäne überprüft wurde. Um dieses Problem zu beheben, mithilfe von [PowerShell doppelte UPN beheben](https://go.microsoft.com/fwlink/p/?LinkId=396730) aktualisieren UPN des Benutzers, um sicherzustellen, dass der Office 365 UPN corporate Benutzername und Domäne übereinstimmt. Wenn Sie den UPN in der lokalen Verzeichnisdienst aktualisieren und es mit Azure Active Directory-Identität synchronisieren möchten, müssen Sie die Lizenz des Benutzers in Office 365 zu entfernen, bevor Sie Änderungen lokale.</span><span class="sxs-lookup"><span data-stu-id="627e2-p118">If you've already set up directory synchronization, the user's UPN for Office 365 may not match the user's on-premises UPN that's defined in your on-premises directory service. This can occur when a user was assigned a license before the domain was verified. To fix this, use [PowerShell to fix duplicate UPN](https://go.microsoft.com/fwlink/p/?LinkId=396730) to update the user's UPN to ensure that the Office 365 UPN matches the corporate user name and domain. If you are updating the UPN in the on-premises directory service and would like it to synchronize with the Azure Active Directory identity, you need to remove the user's license in Office 365 prior to making the changes on-premises.</span></span> 
  
<span data-ttu-id="627e2-229">Siehe auch [wie eine nicht-routingfähigen Domäne (beispielsweise Local Domäne) für die verzeichnissynchronisierung vorbereiten](prepare-a-non-routable-domain-for-directory-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="627e2-229">See also [How to prepare a non-routable domain (such as .local domain) for directory synchronization](prepare-a-non-routable-domain-for-directory-synchronization.md).</span></span>
  
## <a name="directory-integration-tools"></a><span data-ttu-id="627e2-230">Tools für die Directory-integration</span><span class="sxs-lookup"><span data-stu-id="627e2-230">Directory integration tools</span></span>

<span data-ttu-id="627e2-p119">Directory-Synchronisierung wird die Directory-Objekte (Benutzer, Gruppen und Kontakte) aus der lokalen Active Directory-Umgebung mit der Office 365 Directory-Infrastruktur Azure Active Directory-Synchronisierung. Eine Liste der verfügbaren Tools und ihre Funktionalität finden Sie unter [Directory Integration Tools](https://go.microsoft.com/fwlink/p/?LinkID=510956) . Das empfohlene Tool ist [Microsoft Azure Active Directory verbinden](https://go.microsoft.com/fwlink/p/?LinkID=510956). Weitere Informationen zu Azure Active Directory verbinden finden Sie unter [Integration von Ihrer lokalen Identitäten mit Azure Active Directory](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span><span class="sxs-lookup"><span data-stu-id="627e2-p119">Directory synchronization is the synchronization of directory objects (users, groups, and contacts) from your on-premises Active Directory environment to the Office 365 directory infrastructure, Azure Active Directory. See [Directory Integration Tools](https://go.microsoft.com/fwlink/p/?LinkID=510956) for a list of the available tools and their functionality. The recommended tool is [Microsoft Azure Active Directory Connect](https://go.microsoft.com/fwlink/p/?LinkID=510956). For more information about Azure Active Directory Connect, see [Integrating your on-premises identities with Azure Active Directory](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span></span>
  
<span data-ttu-id="627e2-p120">Wenn Benutzerkonten mit Office 365-Verzeichnis zum ersten Mal synchronisiert werden, werden diese markiert als nicht aktiviert. Nicht senden oder Empfangen von e-Mails, und sie nicht Abonnementlizenzen belegen. Wenn Sie Office 365-Abonnements auf bestimmte Benutzer zuweisen möchten, müssen Sie wählen und durch [Zuweisen von Lizenzen für Benutzer in Office 365 für Unternehmen](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc)zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="627e2-p120">When user accounts are synchronized with the Office 365 directory for the first time, they are marked as not activated. They cannot send or receive email, and they don't consume subscription licenses. When you're ready to assign Office 365 subscriptions to specific users, you must select and activate them by [Assign licenses to users in Office 365 for business](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc).</span></span>
  
<span data-ttu-id="627e2-p121">[PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) können auch Lizenzen zuweisen. Informationen Sie [zum Verwenden von PowerShell, automatisch Lizenzen an die Office 365-Benutzer](https://go.microsoft.com/fwlink/p?LinkID=329805) eine automatisierte Lösung.</span><span class="sxs-lookup"><span data-stu-id="627e2-p121">You can also use [PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) to assign licenses. See [How to Use PowerShell to Automatically Assign Licenses to Your Office 365 Users](https://go.microsoft.com/fwlink/p?LinkID=329805) for an automated solution.</span></span>