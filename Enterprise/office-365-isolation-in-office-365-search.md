---
title: Mandantenisolation in der Microsoft 365-Suche
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: 'Zusammenfassung: eine Erläuterung der mandantenisolation in der Microsoft 365-Suche.'
ms.openlocfilehash: 2c57b5610fd1a59f2cff2001981e77e354226452
ms.sourcegitcommit: 6e608d957082244d1b4ffb47942e5847ec18c0b9
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/01/2020
ms.locfileid: "44998255"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a><span data-ttu-id="eb57a-103">Mandantenisolation in der Microsoft 365-Suche</span><span class="sxs-lookup"><span data-stu-id="eb57a-103">Tenant Isolation in Microsoft 365 Search</span></span>

<span data-ttu-id="eb57a-104">Bei der Suche in SharePoint Online wird ein Mandanten Trennungsmodell verwendet, das die Effizienz freigegebener Datenstrukturen mit dem Schutz vor Informationen abgleicht, die zwischen Mandanten auslaufen.</span><span class="sxs-lookup"><span data-stu-id="eb57a-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="eb57a-105">Mit diesem Modell verhindern wir, dass die Suchfeatures von:</span><span class="sxs-lookup"><span data-stu-id="eb57a-105">With this model, we prevent the Search features from:</span></span>

- <span data-ttu-id="eb57a-106">Zurückgeben von Abfrageergebnissen, die Dokumente von anderen Mandanten enthalten</span><span class="sxs-lookup"><span data-stu-id="eb57a-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="eb57a-107">Verfügbar machen ausreichenden Informationen in Abfrageergebnissen, die ein qualifizierter Benutzerinformationen zu anderen Mandanten ableiten könnte</span><span class="sxs-lookup"><span data-stu-id="eb57a-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="eb57a-108">Anzeigen von Schema oder Einstellungen von einem anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="eb57a-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="eb57a-109">Mischen von Analyse Verarbeitungsinformationen zwischen Mandanten oder Speicher Ergebnissen im falschen Mandanten</span><span class="sxs-lookup"><span data-stu-id="eb57a-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="eb57a-110">Verwenden von Wörterbucheinträgen aus einem anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="eb57a-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="eb57a-111">Für jeden Typ von Mandantendaten verwenden wir mindestens eine Schutzschicht im Code, um das versehentliche Auslaufen von Informationen zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="eb57a-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="eb57a-112">Die kritischsten Daten haben die meisten Schutzschichten, um sicherzustellen, dass ein einzelner Fehler nicht zu tatsächlichen oder wahrgenommenen Datenverlusten führt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="eb57a-113">Mandantentrennung für den Suchindex</span><span class="sxs-lookup"><span data-stu-id="eb57a-113">Tenant Separation for the Search Index</span></span>

<span data-ttu-id="eb57a-114">Der Suchindex wird auf dem Datenträger auf den Servern gespeichert, die die Indexkomponenten hosten, und die Mandanten teilen die Indexdateien.</span><span class="sxs-lookup"><span data-stu-id="eb57a-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="eb57a-115">Die indizierten Dokumente eines Mandanten sind nur für Abfragen für diesen Mandanten sichtbar.</span><span class="sxs-lookup"><span data-stu-id="eb57a-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="eb57a-116">Drei unabhängige Mechanismen verhindern Informationslecks:</span><span class="sxs-lookup"><span data-stu-id="eb57a-116">Three independent mechanisms prevent information leakage:</span></span>

- <span data-ttu-id="eb57a-117">Mandanten-ID-Filterung</span><span class="sxs-lookup"><span data-stu-id="eb57a-117">Tenant ID filtering</span></span>
- <span data-ttu-id="eb57a-118">Begriffs Präfix für Mandanten-ID</span><span class="sxs-lookup"><span data-stu-id="eb57a-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="eb57a-119">ACL-Überprüfungen</span><span class="sxs-lookup"><span data-stu-id="eb57a-119">ACL checks</span></span>

<span data-ttu-id="eb57a-120">Bei der Suche müssen alle drei Mechanismen fehlschlagen, um Dokumente an den falschen Mandanten zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="eb57a-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="eb57a-121">Mandanten-ID-Filterung und Mandanten-ID-Ausdruckspräfix</span><span class="sxs-lookup"><span data-stu-id="eb57a-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>

<span data-ttu-id="eb57a-122">Such Präfixe alle Begriffe, die im Volltextindex mit der Mandanten-ID indiziert sind.</span><span class="sxs-lookup"><span data-stu-id="eb57a-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="eb57a-123">Wenn beispielsweise der Ausdruck "*foo*" für einen Mandanten mit der ID "*123*" indiziert wird, lautet der Eintrag im Volltextindex "123foo"*.*</span><span class="sxs-lookup"><span data-stu-id="eb57a-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="eb57a-124">Jede Abfrage wird konvertiert, um die Mandanten-ID mit einem Prozess namens Mandanten-ID-Filterung einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="eb57a-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="eb57a-125">Beispielsweise wird die Abfrage "*foo*" in "<*GUID*> konvertiert. *foo* Und *Mandanten*-ID: <*GUID*> ", wobei <*GUID*> den Mandanten darstellt, der die Abfrage ausführt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="eb57a-126">Diese Abfrage Konvertierung erfolgt innerhalb jedes Index Knotens, und weder die Abfrage noch die Inhaltsverarbeitung können dies beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="eb57a-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="eb57a-127">Da die Mandanten-ID jeder Abfrage hinzugefügt wird, kann die Häufigkeit eines Ausdrucks in anderen Mandanten nicht durch die Suche nach der besten Übereinstimmungsbewertung in einem Mandanten hergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="eb57a-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="eb57a-128">Das Ausdruckspräfix für Mandanten-ID tritt nur im Volltextindex auf.</span><span class="sxs-lookup"><span data-stu-id="eb57a-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="eb57a-129">Feldsuche, beispielsweise "*Title: foo*", wechseln Sie zu einem synthetischen Suchindex, wobei Ausdrücke nicht durch Mandanten-ID vorangestellt werden.</span><span class="sxs-lookup"><span data-stu-id="eb57a-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="eb57a-130">Stattdessen wird dem Feldnamen ein Präfix für die Feld Suche vorangestellt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="eb57a-131">Beispielsweise wird die Abfrage "*Title: foo*" in "*Fields. Title: foo" und "Fields. Tenant-* ID: <*GUID*>" konvertiert.</span><span class="sxs-lookup"><span data-stu-id="eb57a-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="eb57a-132">Da die Häufigkeit eines Ausdrucks die Rangfolge von Treffern im synthetischen Suchindex nicht beeinflusst, ist es nicht erforderlich, die mandantentrennung nach Begriffs Präfixen durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="eb57a-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="eb57a-133">Bei einer Feldsuche wie "*Title: foo*" hängt die Inhalts Trennung des Mandanten von der Mandanten-ID-Filterung durch die Abfrage Konvertierung ab.</span><span class="sxs-lookup"><span data-stu-id="eb57a-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="eb57a-134">Überprüfungen von Dokumentzugriffs Steuerungs Listen</span><span class="sxs-lookup"><span data-stu-id="eb57a-134">Document Access Control List Checks</span></span>

<span data-ttu-id="eb57a-135">Search steuert den Zugriff auf Dokumente über ACLs, die im Suchindex gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="eb57a-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="eb57a-136">Jedes Element wird mit einer Reihe von Ausdrücken in einem speziellen ACL-Feld indiziert.</span><span class="sxs-lookup"><span data-stu-id="eb57a-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="eb57a-137">Das ACL-Feld enthält einen Ausdruck pro Gruppe oder Benutzer, der das Dokument anzeigen kann.</span><span class="sxs-lookup"><span data-stu-id="eb57a-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="eb57a-138">Jede Abfrage wird mit einer Liste von ACE-Begriffen (Access Control Entry, Zugriffssteuerungseintrag) erweitert, eine für jede Gruppe, zu der der authentifizierte Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="eb57a-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="eb57a-139">Beispiel: eine Abfrage wie "<*GUID*>. *foo und Mandanten-* ID: <*GUID*> "wird:" <*GUID*>. *foo und Mandanten-* ID: <*GUID* >  *und* (*docACL:* < *ace1* >  *oder docACL*: <*ace2* >  *oder docACL*: <*ace3* >  *...*) "</span><span class="sxs-lookup"><span data-stu-id="eb57a-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="eb57a-140">Da Benutzer-und Gruppen-IDs und damit ACEs eindeutig sind, bietet dies ein zusätzliches Sicherheitsniveau zwischen Mandanten für Dokumente, die nur für einige Benutzer sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="eb57a-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="eb57a-141">Das gleiche gilt für den speziellen Ace "jeder außer externen Benutzern", der regulären Benutzern im Mandanten Zugriff gewährt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="eb57a-142">Da ACEs für "Everyone" jedoch für alle Mandanten gleich sind, hängt die mandantentrennung für öffentliche Dokumente von der Mandanten-ID-Filterung ab.</span><span class="sxs-lookup"><span data-stu-id="eb57a-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="eb57a-143">Deny-ACEs werden ebenfalls unterstützt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="eb57a-144">Die Abfrageerweiterung fügt eine Klausel hinzu, die ein Dokument aus dem Ergebnis entfernt, wenn eine Übereinstimmung mit einem Deny-ACE vorliegt.</span><span class="sxs-lookup"><span data-stu-id="eb57a-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="eb57a-145">In Exchange Online Suche wird der Index für die Post Fach-ID für die Postfächer einzelner Benutzer anstelle der Mandanten-ID (Abonnement-ID) wie in SharePoint Online partitioniert.</span><span class="sxs-lookup"><span data-stu-id="eb57a-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="eb57a-146">Der Partitionierungs Mechanismus ist identisch mit SharePoint Online, es gibt jedoch keine ACL-Filterung.</span><span class="sxs-lookup"><span data-stu-id="eb57a-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
